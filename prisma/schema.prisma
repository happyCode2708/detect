datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:@localhost:5432/ocrfood"
}

generator client {
  provider = "prisma-client-js"
}

enum Role {
  USER
  ADMIN
}

enum Status {
  UNKNOWN
  FAIL
  SUCCESS
}

model User {
  id       String   @id @default(uuid())
  email    String   @unique
  password String
  name     String?
  role     Role     @default(USER)
}

model Product {
  id                String    @id @default(uuid())
  ixoneID           String?   @unique
  upc12             String?   
  createdAt         DateTime  @default(now())
  validationResult  String?
  images            Image[]
  extractSessions   ExtractSession[]
  compareResult     String?   @default("")
}

model ExtractSession {
  sessionId       String   @id @default(uuid())
  productId       String
  product         Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  createdAt       DateTime @default(now())
  status          Status
  result          String?
  nutrition       String?
  nutrition_cost  Float?
  attr_1          String?
  attr_1_cost     Float?
  attr_2          String?
  attr_2_cost     Float?
  ocr             String?
  estimate_cost   Float?
}

model Image {
  name      String?
  id        String   @id @default(uuid())
  url       String
  path      String   @default("")
  productId String
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
}